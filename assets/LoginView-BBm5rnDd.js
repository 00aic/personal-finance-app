import{d as T,p as x,q as j,s as U,v as h,u as m,b as s,I as H,t as d,i as g,j as A,Q as O,r as p,c as r,g as Q,a as B,m as z,f as y,H as k,P as S,x as M,M as G}from"./index-C032iH88.js";import{h as N,_ as J}from"./illustration-authentication-BmoVJKBC.js";import{B as W,c as X,b as c,u as Y,F as V}from"./index.esm-Capl0ve9.js";import"./config-DsdTllfp.js";const Z=i=>N.post("/login",i),ee=i=>N.post("/login/account",i),ae={class:"dialog__body"},se={class:"dialog__body-msg"},oe={class:"dialog__footer"},te=T({__name:"MessageBox",props:x({title:{default:"Tip"},message:{default:"The operation was successful."},confirmText:{default:"Confirm"}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:x(["confirm"],["update:modelValue"]),setup(i,{emit:b}){const u=j(i,"modelValue"),e=b,n=()=>{u.value=!1,e("confirm")};return(a,v)=>(g(),U(m(W),{modelValue:u.value,"onUpdate:modelValue":v[0]||(v[0]=w=>u.value=w),title:a.title,"show-close":!1,class:"dialog"},{footer:h(()=>[s("div",oe,[s("button",{class:"dialog__footer-confirm",onClick:n},d(a.confirmText),1)])]),default:h(()=>[s("div",ae,[H(a.$slots,"default",{},()=>[s("div",se,d(a.message),1)],!0)])]),_:3},8,["modelValue","title"]))}}),le=A(te,[["__scopeId","data-v-adbf5521"]]),ne=J,ie=S,re={class:"login"},de={class:"container-wrapper"},ue={class:"container"},ce={class:"container__title"},me={class:"container__form"},ve={key:0,class:"password-tip"},fe={class:"container__footer"},pe={class:"container__footer-tip"},_="Can't be empty",_e=T({__name:"LoginView",setup(i){const b=Q(),u=O(),e=p(!0),n=p(!1),a=p({email:"",password:""}),v=r(()=>e.value?"Login":"Sign Up"),w=r(()=>e.value?"Password":"Create Password"),P=r(()=>e.value?"Login":"Create Account"),$=r(()=>e.value?"Need to create an account?":"Already have an account?"),q=r(()=>e.value?"Sign Up":"Login"),F=r(()=>X({name:e.value?c().optional():c().required(_),email:c().email().required(_),password:e.value?c().required(_):c().min(8,"Passwords must be at least 8 characters").required(_)})),{handleSubmit:C}=Y({validationSchema:F}),L=()=>{e.value?K():D()},I=()=>{a.value={name:"",email:"",password:""},e.value?E():R()},f=p(""),K=C(async()=>{try{const l=await Z(a.value);l.data.success?(u.login(l.data.user??""),b.push({name:"Overview"})):(f.value=l.data.message??"Login Failed",n.value=!0)}catch(l){console.log(l)}}),D=C(async()=>{try{await ee(a.value),f.value="Create account successfully.",n.value=!0}catch(l){console.log(l),f.value="Failed to create account.",n.value=!0}}),E=()=>{e.value=!1},R=()=>{e.value=!0};return(l,t)=>(g(),B("div",re,[t[4]||(t[4]=z('<div class="header" data-v-5bf562f4><picture data-v-5bf562f4><div class="header__top" data-v-5bf562f4><img src="'+S+'" alt="logo" data-v-5bf562f4></div><source srcset="'+ne+'" media="(min-width: 1025px)" data-v-5bf562f4><source srcset="'+ie+'" media="(max-width: 768px)" data-v-5bf562f4><img src="'+S+'" alt="logo" class="header__img" data-v-5bf562f4><div class="header__bottom" data-v-5bf562f4><div class="header__bottom-title" data-v-5bf562f4>Keep track of your money and save for your future</div><div class="header-_bottom-desc" data-v-5bf562f4> Personal finance app puts you in control of your spending. Track transactions, set budgets, and add to savings pots easily. </div></div></picture></div>',1)),s("div",de,[s("div",ue,[s("div",ce,d(v.value),1),s("form",me,[e.value?k("",!0):(g(),U(m(V),{key:0,modelValue:a.value.name,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.name=o),name:"name",label:"Name"},null,8,["modelValue"])),y(m(V),{modelValue:a.value.email,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.email=o),name:"email",label:"Email"},{default:h(({field:o})=>[s("input",M({type:"email"},o,{name:"email",id:"email"}),null,16)]),_:1},8,["modelValue"]),y(m(V),{modelValue:a.value.password,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.password=o),name:"password",label:w.value},{default:h(({field:o})=>[s("input",M({type:"password"},o,{name:"password",id:"password",onKeyup:G(L,["enter"])}),null,16),e.value?k("",!0):(g(),B("div",ve,"Passwords must be at least 8 characters"))]),_:1},8,["modelValue","label"])]),s("button",{class:"container__button",type:"submit",onClick:L},d(P.value),1),s("div",fe,[s("span",pe,d($.value),1),s("span",{class:"container__footer-sign",onClick:I},d(q.value),1)])])]),y(m(le),{modelValue:n.value,"onUpdate:modelValue":t[3]||(t[3]=o=>n.value=o),message:f.value},null,8,["modelValue","message"])]))}}),ye=A(_e,[["__scopeId","data-v-5bf562f4"]]);export{ye as default};
