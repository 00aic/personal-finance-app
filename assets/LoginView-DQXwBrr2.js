import{d as T,p as x,q as j,s as U,v as h,u as m,b as s,I as H,t as r,i as g,j as A,Q as O,r as p,c as i,g as Q,a as B,m as z,f as y,H as k,P as S,x as M,M as G}from"./index-CDsun8ib.js";import{h as N,_ as J}from"./illustration-authentication-BmoVJKBC.js";import{B as W,c as X,b as u,u as Y,F as V}from"./index.esm-S9F6OBOS.js";import"./config-DsdTllfp.js";const Z=d=>N.post("/login",d),ee=d=>N.post("/login/account",d),ae={class:"dialog__body"},se={class:"dialog__body-msg"},oe={class:"dialog__footer"},te=T({__name:"MessageBox",props:x({title:{default:"Tip"},message:{default:"The operation was successful."},confirmText:{default:"Confirm"}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:x(["confirm"],["update:modelValue"]),setup(d,{emit:w}){const c=j(d,"modelValue"),e=w,n=()=>{c.value=!1,e("confirm")};return(a,v)=>(g(),U(m(W),{modelValue:c.value,"onUpdate:modelValue":v[0]||(v[0]=b=>c.value=b),title:a.title,"show-close":!1,class:"dialog"},{footer:h(()=>[s("div",oe,[s("button",{class:"dialog__footer-confirm",onClick:n},r(a.confirmText),1)])]),default:h(()=>[s("div",ae,[H(a.$slots,"default",{},()=>[s("div",se,r(a.message),1)],!0)])]),_:3},8,["modelValue","title"]))}}),le=A(te,[["__scopeId","data-v-adbf5521"]]),ne=J,de=S,ie={class:"login"},re={class:"container-wrapper"},ce={class:"container"},ue={class:"container__title"},me={class:"container__form"},ve={key:0,class:"password-tip"},fe={class:"container__footer"},pe={class:"container__footer-tip"},_="Can't be empty",_e=T({__name:"LoginView",setup(d){const w=Q(),c=O(),e=p(!0),n=p(!1),a=p({email:"",password:""}),v=i(()=>e.value?"Login":"Sign Up"),b=i(()=>e.value?"Password":"Create Password"),P=i(()=>e.value?"Login":"Create Account"),$=i(()=>e.value?"Need to create an account?":"Already have an account?"),q=i(()=>e.value?"Sign Up":"Login"),F=i(()=>X({name:e.value?u().optional():u().required(_),email:u().email().required(_),password:e.value?u().required(_):u().min(8,"Passwords must be at least 8 characters").required(_)})),{handleSubmit:C}=Y({validationSchema:F}),L=()=>{e.value?K():D()},I=()=>{a.value={name:"",email:"",password:""},e.value?E():R()},f=p(""),K=C(async()=>{try{const l=await Z(a.value);l.data.success?(c.login(l.data.user??""),w.push({name:"Overview"})):(f.value=l.data.message??"Login Failed",n.value=!0)}catch(l){console.log(l)}}),D=C(async()=>{try{await ee(a.value),f.value="Create account successfully.",n.value=!0}catch(l){console.log(l),f.value="Failed to create account.",n.value=!0}}),E=()=>{e.value=!1},R=()=>{e.value=!0};return(l,t)=>(g(),B("div",ie,[t[4]||(t[4]=z('<div class="header" data-v-cd7df0f7><picture data-v-cd7df0f7><div class="header__top" data-v-cd7df0f7><img src="'+S+'" alt="logo" data-v-cd7df0f7></div><source srcset="'+ne+'" media="(min-width: 1025px)" data-v-cd7df0f7><source srcset="'+de+'" media="(max-width: 768px)" data-v-cd7df0f7><img src="'+S+'" alt="logo" class="header__img" data-v-cd7df0f7><div class="header__bottom" data-v-cd7df0f7><div class="header__bottom-title" data-v-cd7df0f7>Keep track of your money and save for your future</div><div class="header-_bottom-desc" data-v-cd7df0f7> Personal finance app puts you in control of your spending. Track transactions, set budgets, and add to savings pots easily. </div></div></picture></div>',1)),s("div",re,[s("div",ce,[s("div",ue,r(v.value),1),s("form",me,[e.value?k("",!0):(g(),U(m(V),{key:0,modelValue:a.value.name,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.name=o),name:"name",label:"Name"},null,8,["modelValue"])),y(m(V),{modelValue:a.value.email,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.email=o),name:"email",label:"Email"},{default:h(({field:o})=>[s("input",M({type:"email"},o,{name:"email",id:"email"}),null,16)]),_:1},8,["modelValue"]),y(m(V),{modelValue:a.value.password,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.password=o),name:"password",label:b.value},{default:h(({field:o})=>[s("input",M({type:"password"},o,{name:"password",id:"password",onKeyup:G(L,["enter"])}),null,16),e.value?k("",!0):(g(),B("div",ve,"Passwords must be at least 8 characters"))]),_:1},8,["modelValue","label"])]),s("button",{class:"container__button",type:"submit",onClick:L},r(P.value),1),s("div",fe,[s("span",pe,r($.value),1),s("span",{class:"container__footer-action",onClick:I},r(q.value),1)])])]),y(m(le),{modelValue:n.value,"onUpdate:modelValue":t[3]||(t[3]=o=>n.value=o),message:f.value},null,8,["modelValue","message"])]))}}),ye=A(_e,[["__scopeId","data-v-cd7df0f7"]]);export{ye as default};
